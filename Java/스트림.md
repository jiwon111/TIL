# 스트림

스트림은 배열, 컬렉션의 요소들을 순차적으로 참조하여 람다식으로 처리할 수 있게 해주는 반복자이다.

스트림을 활용하면 많은 양의 데이터에 복잡한 연산을 수행할 수 있고 가독성과 재사용성이 높은 코드를 작성할 수 있다.

<br>
 <br>

## 스트림의 특징

1. 선언형 프로그래밍으로 코드를 처리하기 때문에 내부의 동작 원리를 모르더라도 메서드 이름을 보고 무슨 일을 하는지 이해하기가 쉽다는 장점이 있다.

2. for문, while문에서 index나 iterator를 사용하여 코드로 직접 모든 요소를 반복하는 외부 반복자와 달리 **내부 반복자**를 이용하여 병렬 처리가 쉽다. 내부 반복자를 이용하면 컬렉션 내부에서 어떻게 요소를 반복시키는지는 추상화시키고 개발자는 처리해야 할 코드만 작성하면 되기 때문이다.
   ![](<../assets/Java/반복자(외부:내부).png>)

3. 데이터를 변경하지 않고 데이터를 읽기만 할 수 있고 한 번 사용하고 나면 닫히기 때문에 필요하다면 새로운 스트림을 만들어야 한다.

 <br>
<br>

## 스트림 사용 방법

### 1. 스트림 생성

Collection 인터페이스에는 `stream()`이 정의되어 있어서 Collection을 구현한 객체들은 모두 `stream()`으로 스트림을 생성할 수 있다.

Collection이 아닌 배열의 원소들로 Stream을 생성하기 위해서는 `Stream.of()`를 사용하거나 `Arrays.stream()`을 사용한다.

<br>

### 2. 중간 연산

중간 연산은 연산 결과를 스트림으로 반환하기 때문에 연속해서 여러 번 수행할 수 있다.

주요 메서드는 다음과 같다.

 <br>

- distinct() : Stream 요소의 중복을 제거하기 위해 사용한다.

- filter() : 매개 값으로 조건이 주어지고 조건이 참이 되는 요소만 필터링한다.

- map() : 기존의 요소들을 대체하는 요소로 구성된 새로운 Stream을 형성하는 연산이다.

- sorted() : 오름차순으로 정렬이 되며 파라미터로 비교자를 넘길 수도 있다.

  ex) 내림차순으로 정렬 : sorted(Comparator.reverseOrder())

- peek() : 요소를 하나씩 돌면서 출력하며 중간 연산 메서드 이다. 주로 연산 중간에 결과를 확인하여 디버깅하고자 할 때 사용한다.

<br>

### 3. 최종 연산

최종 연산은 연산 결과가 스트림이 아니기 때문에 한번만 연산이 가능하다.

- forEach() : peek()과 동일하게 요소를 하나씩 돌면서 출력하는 기능을 수행한다.

- match() 메서드를 사용하여 Stream의 요소들이 특정 조건을 충족하는지 검사하고 결과를 boolean으로 반환한다.

- allMatch() : 모든 요소들이 매개 값으로 주어진 조건을 만족하는지 검사

- anyMatch() : 주어진 조건을 만족하는 요소가 하나라도 있는지 검사

- noneMatch() : 모든 요소가 조건을 만족하지 않는지 검사

이외에도 sum(), count(), average(), max(), min() 등의 메서드가 있으며, Stream의 요소들을 List나 Set, Map 등 다른 종류의 컬렉션으로 받고 싶은 경우에는 `collect()`를 이용한다.

```java
list.stream()
    .collect(Collectors.toList());
```

<br>
<br>
<br>

# Optional

Optional은 NullPointerException(NPE)를 방지하는 차원에서 도입되었으며, 모든 타입의 객체를 담을 수 있는 Wrapper 클래스이다.

스트림과 유사하게 메서드를 여러 개 작성할 수 있다는 특징을 갖고, 연산을 수행한 후에 결과를 Optional 객체로 반환해주면 따로 조건문을 쓰지 않아도 NPE를 방지할 수 있다는 장점이 있다.

Optional 객체를 생성하기 위해서는 `of()`, 만약 참조변수의 값이 `null`일 가능성이 있다면 `ofNullable()`을 사용한다.

```java
Optional<String> opt1 = Optional.ofNullable("111");
```

Optional 객체의 값을 가져오기 위해서는 `get()`을 사용한다. 만약 값이 `null`일 가능성이 있다면 `orElse()`의 매개변수 값으로 default 값을 지정할 수 있다.
